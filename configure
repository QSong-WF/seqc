#!/usr/local/bin/python3

import os
import configparser

# install and configure the config file
install_dir = os.path.expanduser('~/.seqc') + '/'
if not os.path.isdir(install_dir):
    os.makedirs(install_dir)
seqc_dir = os.path.dirname(os.path.realpath(__file__))

config = configparser.RawConfigParser()
seqc_config = seqc_dir + '/src/plugins/config'
config.read(seqc_config)
# have the user fill in any missing values
print('Configuring SEQC for access to Amazon Web Services and BaseSpace. If needed, '
      'you can access, fill, or update this configuration data in ~/.seqc/config at any'
      'time.\n')

for s in config.sections():
    for k, v in config[s].items():
        if v == 'None':
            user_input = input('Please provide your %s: ' % k)
            if user_input:
                config[s][k] = user_input
with open(install_dir + 'config', 'w') as f:
    config.write(f)

print('SEQC configuration complete. Thank you.')